define(["../core","../var/support","../ajax"],function(e,t){"use strict";e.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var u={0:200,1223:204},r=e.ajaxSettings.xhr();t.cors=!!r&&"withCredentials"in r,t.ajax=r=!!r,e.ajaxTransport(function(s){var a,i;if(t.cors||r&&!s.crossDomain)return{send:function(e,t){var r,n=s.xhr();if(n.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(r in s.xhrFields)n[r]=s.xhrFields[r];for(r in s.mimeType&&n.overrideMimeType&&n.overrideMimeType(s.mimeType),s.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(r,e[r]);a=function(e){return function(){a&&(a=i=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(u[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=a(),i=n.onerror=n.ontimeout=a("error"),n.onabort!==undefined?n.onabort=i:n.onreadystatechange=function(){4===n.readyState&&window.setTimeout(function(){a&&i()})},a=a("abort");try{n.send(s.hasContent&&s.data||null)}catch(o){if(a)throw o}},abort:function(){a&&a()}}})});