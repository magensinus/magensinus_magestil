define(["../core","../core/toType","../var/isFunction"],function(a,s,d){"use strict";var v=function(n,e,l,r,c,t,i){var u=0,o=n.length,f=null==l;if("object"===s(l))for(u in c=!0,l)v(n,e,u,l[u],!0,t,i);else if(r!==undefined&&(c=!0,d(r)||(i=!0),f&&(i?(e.call(n,r),e=null):(f=e,e=function(n,e,l){return f.call(a(n),l)})),e))for(;u<o;u++)e(n[u],l,i?r:r.call(n[u],u,e(n[u],l)));return c?n:f?e.call(n):o?e(n[0],l):t};return v});