define(["../core","../var/document","../ajax"],function(e,n){"use strict";e.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),e.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return e.globalEval(t),t}}}),e.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),e.ajaxTransport("script",function(c){var a,i;if(c.crossDomain||c.scriptAttrs)return{send:function(t,r){a=e("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",i=function(t){a.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),n.head.appendChild(a[0])},abort:function(){i&&i()}}})});